@page
@model fixflow.web.Pages.Admin.AdminUserToolModel
@{
    ViewData["Title"] = "Administrator Tools";  
}
<script src="~/js/userManager.js"></script>

<form method="post">
    @Html.AntiForgeryToken()
</form>

<div class="admin-shell">
    <div class="page-header">
        <h1 class="page-title">Administrator Tools</h1>
        <p class="page-subtitle">Welcome @User.Identity?.Name</p>
    </div>

    <div class="admin-table-wrap">
        <table class="admin-table">
            <thead>
                <tr align="center">
                    <th rowspan="2">UserName</th>
                    <th rowspan="2">E-Mail</th>
                    <th>Pending</th>
                    <th>Resident</th>
                    <th>Employee</th>
                    <th>Manager</th>
                    <th>Administrator</th>
                    <th rowspan="2">Locked Out</th>
                    <th rowspan="2">Password</th>
                    <th rowspan="2">Apply</th>
                </tr>
                <tr class="filter-row" align="center">
                    <th><input type="checkbox" id="filter-Pending" name="filter-Pending" value="Show" checked></th>
                    <th><input type="checkbox" id="filter-Clerk" name="filter-Resident" value="Show" checked></th>
                    <th><input type="checkbox" id="filter-Employee" name="filter-Employee" value="Show" checked></th>
                    <th><input type="checkbox" id="filter-Manager" name="filter-Manager" value="Show" checked></th>
                    <th><input type="checkbox" id="filter-Admin" name="filter-Admin" value="Show" checked></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model.Users)
                {
                    var userRole = await Model.GetUserRoleAsync(user);
                    <tr id="row-@user.Id">
                        <td>
                            <span title="ID: @user.Id">@user.UserName</span>
                        </td>
                        <td>
                            <a href="mailto:@user.Email">@user.Email</a>
                        </td>
                        <td align="center">
                            <input type="radio" id="role-@user.Id-P" name="role-@user.Id" value="Pending" @(userRole == "Pending" ? "checked" : "")>
                        </td>
                        <td align="center">
                            <input type="radio" id="role-@user.Id-C" name="role-@user.Id" value="Clerk" @(userRole == "Resident" ? "checked" : "")>
                        </td>
                        <td align="center">
                            <input type="radio" id="role-@user.Id-E" name="role-@user.Id" value="Employee" @(userRole == "Employee" ? "checked" : "")>
                        </td>
                        <td align="center">
                            <input type="radio" id="role-@user.Id-M" name="role-@user.Id" value="Manager" @(userRole == "Manager" ? "checked" : "")>
                        </td>
                        <td align="center">
                            <input type="radio" id="role-@user.Id-A" name="role-@user.Id" value="Admin" @(userRole == "Admin" ? "checked" : "")>
                        </td>
                        <td align="center">
                            <input type="checkbox" id="lcko-@user.Id" name="lcko-@user.Id" value="Lockedout" @(user.LockoutEnabled ? "checked" : "")>
                        </td>
                        <td align="center">
                            <button type="button" id="pRst-@user.Id">Reset</button>
                        </td>
                        <td align="center">
                            <button type="button" class="btn-ghost u-hidden" id="aply-@user.Id">Apply</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
